{% extends 'base.html' %}

{% block content %}
<header class="page-header">
    <h2>Minhas Tarefas</h2>
    <p>Organize seu dia com eficiÃªncia.</p>
</header>

<div class="layout-grid">
    <div class="card form-card">
        <h3>ðŸš€ Nova Tarefa</h3>
        <form method="post">
            {% csrf_token %}
            {% for field in form %}
                <div class="form-group">
                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                    {{ field }}
                </div>
            {% endfor %}
            <button type="submit" class="btn btn-primary full-width">Adicionar Tarefa</button>
        </form>
    </div>

    <div class="task-list-container">
        {% if tasks %}
            <ul class="task-list">
                {% for task in tasks %}
                <li class="task-item {% if task.status == 'concluida' %}done{% endif %}">
                    <div class="task-info">
                        <span class="project-badge">{{ task.project.title }}</span>
                        <strong>{{ task.title }}</strong>
                        <small>Criado em: {{ task.created_at|date:"d/m/Y" }}</small>
                    </div>
                    
                    <div class="task-actions">
                        {% if task.status == 'pendente' %}
                            <form action="{% url 'complete_task' task.id %}" method="post">
                                {% csrf_token %}
                                <button type="submit" class="btn-icon check" title="Concluir">âœ”</button>
                            </form>
                        {% endif %}
                        
                        <form action="{% url 'delete_task' task.id %}" method="post">
                            {% csrf_token %}
                            <button type="submit" class="btn-icon trash" onclick="return confirm('Tem certeza?')" title="Deletar">âœ–</button>
                        </form>
                    </div>
                </li>
                {% endfor %}
            </ul>
        {% else %}
            <div class="empty-state">
                <p>ðŸ“­ Nenhuma tarefa encontrada.</p>
                <p>Use o painel Ã  esquerda para comeÃ§ar!</p>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}